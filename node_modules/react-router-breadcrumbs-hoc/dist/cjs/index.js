"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),React__default=_interopDefault(React),reactRouter=require("react-router"),__assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function __rest(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r}function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var a=Array(e),n=0,t=0;t<r;t++)for(var o=arguments[t],c=0,u=o.length;c<u;c++,n++)a[n]=o[c];return a}var DEFAULT_MATCH_OPTIONS={exact:!0},NO_BREADCRUMB="NO_BREADCRUMB",humanize=function(e){return e.replace(/^[\s_]+|[\s_]+$/g,"").replace(/[_\s]+/g," ").replace(/^[a-z]/,function(e){return e.toUpperCase()})},render=function(e){var t=e.breadcrumb,r=e.match,a=e.location,n=__rest(e,["breadcrumb","match","location"]),o=__assign({match:r,location:a,key:r.url},n);return __assign(__assign({},o),{breadcrumb:"string"==typeof t?React.createElement("span",{key:o.key},t):React__default.createElement(t,__assign({},o))})},getDefaultBreadcrumb=function(e){var t=e.currentSection,r=e.location,a=e.pathSection,n=reactRouter.matchPath(a,__assign(__assign({},DEFAULT_MATCH_OPTIONS),{path:a}))||{url:"not-found"};return render({breadcrumb:humanize(t),match:n,location:r})},getBreadcrumbMatch=function(e){var c,u=e.currentSection,s=e.disableDefaults,t=e.excludePaths,i=e.location,_=e.pathSection,r=e.routes;return t&&t.some(function(e){return reactRouter.matchPath(_,{path:e,exact:!0,strict:!1})})?NO_BREADCRUMB:(r.some(function(e){var t=e.breadcrumb,r=e.matchOptions,a=e.path,n=__rest(e,["breadcrumb","matchOptions","path"]);if(!a)throw new Error("withBreadcrumbs: `path` must be provided in every route object");var o=reactRouter.matchPath(_,__assign(__assign({},r||DEFAULT_MATCH_OPTIONS),{path:a}));return o&&null===t||!o&&r?(c=NO_BREADCRUMB,!0):!!o&&(c=!t&&s?NO_BREADCRUMB:render(__assign({breadcrumb:t||humanize(u),match:o,location:i},n)),!0)}),c||(s?NO_BREADCRUMB:getDefaultBreadcrumb({pathSection:_,currentSection:"/"===_?"Home":u,location:i})))},getBreadcrumbs=function(e){var o=e.routes,c=e.location,t=e.options,u=void 0===t?{}:t,s=[];return c.pathname.split("?")[0].split("/").reduce(function(e,t,r){var a=t?e+"/"+t:"/";if("/"==a&&0!==r)return"";var n=getBreadcrumbMatch(__assign({currentSection:t,location:c,pathSection:a,routes:o},u));return n!==NO_BREADCRUMB&&s.push(n),"/"==a?"":a},""),s},flattenRoutes=function r(e){return e.reduce(function(e,t){return t.routes?e.concat(__spreadArrays([t],r(t.routes))):e.concat(t)},[])},index=function(e,a){return function(t){var r={options:a,routes:flattenRoutes(e||[])};return reactRouter.useLocation?function(e){return React__default.createElement(t,__assign(__assign({},e),{breadcrumbs:getBreadcrumbs(__assign(__assign({},r),{location:reactRouter.useLocation()}))}))}:reactRouter.withRouter(function(e){return console.warn("[react-router-breadcrumbs-hoc]: react-router v4 support will be deprecated in the next major release. Please consider upgrading react-router and react-router-dom to >= 5.1.0"),React.createElement(t,__assign(__assign({},e),{breadcrumbs:getBreadcrumbs(__assign(__assign({},r),{location:e.location}))}))})}};exports.default=index,exports.getBreadcrumbs=getBreadcrumbs;
//# sourceMappingURL=index.js.map
